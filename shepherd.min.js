/*! shepherd.js 0.1.0 */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o={}.hasOwnProperty,p=[].slice,q=function(a,b){return function(){return a.apply(b,arguments)}},r=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c=function(){function a(){}return a}(),a={top:"top center",left:"middle right",right:"middle left",bottom:"bottom center"},n=function(){var a;return a=0,function(){return a++}}(),i=function(a){var b,c,d,e,f,g,h;for(null==a&&(a={}),b=[],Array.prototype.push.apply(b,arguments),h=b.slice(1),f=0,g=h.length;g>f;f++)if(d=h[f])for(c in d)o.call(d,c)&&(e=d[c],a[c]=e);return a},h=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},l=function(a,b){return a.className=a.className.replace(new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")},f=function(a,b){return l(a,b),a.className+=" "+b},g=function(a,b,c){return null!=a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},m=function(a,b,c){return null!=a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},j=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=null!=(h=null!=(i=null!=(j=null!=(k=a.matches)?k:a.matchesSelector)?j:a.webkitMatchesSelector)?i:a.mozMatchesSelector)?h:a.oMatchesSelector,null!=e)return e.call(a,b);for(d=document.querySelectorAll(b),f=0,g=d.length;g>f;f++)if(c=d[f],c===a)return!0;return!1},k=function(a,b){var c,d,e,f,g,h;if(null==a)return a;if("object"==typeof a)return a;for(f=a.split(" "),d={},c=g=0,h=b.length;h>g;c=++g)e=b[c],d[e]=f[c];return d},b=function(){function a(){}return a.prototype.on=function(a,b,c,d){var e;return null==d&&(d=!1),null==this.bindings&&(this.bindings={}),null==(e=this.bindings)[a]&&(e[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})},a.prototype.once=function(a,b,c){return this.on(a,b,c,!0)},a.prototype.off=function(a,b){var c,d,e;if(null!=(null!=(d=this.bindings)?d[a]:void 0)){if(null==b)return delete this.bindings[a];for(c=0,e=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?e.push(this.bindings[a].splice(c,1)):e.push(c++);return e}},a.prototype.trigger=function(){var a,b,c,d,e,f,g,h,i;if(c=arguments[0],a=2<=arguments.length?p.call(arguments,1):[],null!=(g=this.bindings)?g[c]:void 0){for(e=0,i=[];e<this.bindings[c].length;)h=this.bindings[c][e],d=h.handler,b=h.ctx,f=h.once,d.apply(null!=b?b:this,a),f?i.push(this.bindings[c].splice(e,1)):i.push(e++);return i}},a}(),d=function(b){function c(a,b){this.tour=a,this.destroy=q(this.destroy,this),this.scrollTo=q(this.scrollTo,this),this.complete=q(this.complete,this),this.cancel=q(this.cancel,this),this.hide=q(this.hide,this),this.show=q(this.show,this),this.setOptions(b)}return r(c,b),c.prototype.setOptions=function(a){var b,c,d,e;if(this.options=null!=a?a:{},this.destroy(),this.id=this.options.id||this.id||"step-"+n(),this.options.when){e=this.options.when;for(b in e)c=e[b],this.on(b,c,this)}return null!=(d=this.options).buttons?(d=this.options).buttons:d.buttons=[{text:"Next",action:this.tour.next}]},c.prototype.bindAdvance=function(){var a,b,c,d,e=this;return d=k(this.options.advanceOn,["event","selector"]),a=d.event,c=d.selector,b=function(a){if(null!=c){if(j(a.target,c))return e.tour.advance()}else if(e.el&&a.target===e.el)return e.tour.advance()},g(document.body,a,b),this.on("destroy",function(){return m(document.body,a,b)})},c.prototype.getAttachTo=function(){var a;if(a=k(this.options.attachTo,["element","on"]),null==a&&(a={}),"string"==typeof a.element&&(a.element=document.querySelector(a.element),null==a.element))throw new Error("Shepherd step's attachTo was not found in the page");return a},c.prototype.setupTether=function(){var b,c,d;if("undefined"==typeof Tether||null===Tether)throw new Error("Using the attachment feature of Shepherd requires the Tether library");return c=this.getAttachTo(),b=a[c.on||"right"],null==c.element&&(c.element="viewport",b="middle center"),d={element:this.el,target:c.element,offset:c.offset||"0 0",attachment:b},this.tether=new Tether(i(d,this.options.tetherOptions))},c.prototype.show=function(){var a,b=this;return null==this.el&&this.render(),l(this.el,"shepherd-hidden"),null!=(a=this.tether)&&a.enable(),this.options.scrollTo&&setTimeout(function(){return b.scrollTo()}),this.trigger("show")},c.prototype.hide=function(){var a;return f(this.el,"shepherd-hidden"),null!=(a=this.tether)&&a.disable(),this.trigger("hide")},c.prototype.cancel=function(){return this.hide(),this.trigger("cancel")},c.prototype.complete=function(){return this.hide(),this.trigger("complete")},c.prototype.scrollTo=function(){var a,b,c,d,e,f,g,h,i,j;return e=this.getAttachTo().element,null!=e?(a=jQuery(e),j=a.offset(),i=j.top,g=j.left,f=a.outerHeight(),h=$(this.el).offset(),d=h.top,c=h.left,b=$(this.el).outerHeight(),pageYOffset>i||pageYOffset>d?jQuery(document.body).scrollTop(Math.min(i,d)-10):i+f>pageYOffset+innerHeight||d+b>pageYOffset+innerHeight?jQuery(document.body).scrollTop(Math.max(i+f,d+b)-innerHeight+10):void 0):void 0},c.prototype.destroy=function(){var a;return null!=this.el&&(document.body.removeChild(this.el),delete this.el),null!=(a=this.tether)&&a.destroy(),this.trigger("destroy")},c.prototype.render=function(){var a,b,c,d,e,f,g,i,j,k,l,m,n,o,p,q;if(null!=this.el&&this.destroy(),this.el=h("<div class='shepherd-step "+(null!=(o=this.options.classes)?o:"")+"' data-id='"+this.id+"'></div>"),d=document.createElement("div"),d.className="drop-content",this.el.appendChild(d),null!=this.options.title&&(f=document.createElement("header"),f.innerHTML="<h3 class='shepherd-title'>"+this.options.title+"</h3>",d.appendChild(f)),null!=this.options.text){for(j=h("<div class='shepherd-text'></div>"),i=this.options.text,"string"==typeof i&&(i=[i]),k=0,m=i.length;m>k;k++)g=i[k],j.innerHTML+="<p>"+g+"</p>";d.appendChild(j)}if(e=document.createElement("footer"),this.options.buttons){for(b=h("<ul class='shepherd-buttons'></ul>"),p=this.options.buttons,l=0,n=p.length;n>l;l++)c=p[l],a=h("<li><a class='shepherd-button "+(null!=(q=c.classes)?q:"")+"'>"+c.text+"</a>"),b.appendChild(a),this.bindButtonEvents(c,a);e.appendChild(b)}return d.appendChild(e),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn?this.bindAdvance():void 0},c.prototype.bindButtonEvents=function(a,b){var c,d,e,f,h=this;null==a.events&&(a.events={}),null!=a.action&&(a.events.click=a.action),f=a.events;for(c in f)d=f[c],"string"==typeof d&&(e=d,d=function(){return h.tour.show(e)}),g(b,c,d);return this.on("destroy",function(){var e,f;e=a.events,f=[];for(c in e)d=e[c],f.push(m(b,c,d));return f})},c}(b),e=function(){function a(a){var b;this.options=null!=a?a:{},this.hide=q(this.hide,this),this.cancel=q(this.cancel,this),this.back=q(this.back,this),this.next=q(this.next,this),this.steps=null!=(b=this.options.steps)?b:[]}return a.prototype.addStep=function(a,b){return null==b?b=a:b.id=a,b=i({},this.options.defaults,b),this.steps.push(new d(this,b))},a.prototype.getById=function(a){var b,c,d,e;for(e=this.steps,c=0,d=e.length;d>c;c++)if(b=e[c],b.id===a)return b},a.prototype.next=function(){var a;return a=this.steps.indexOf(this.currentStep),this.show(a+1)},a.prototype.back=function(){var a;return a=this.steps.indexOf(this.currentStep),this.show(a-1)},a.prototype.cancel=function(){var a;return null!=(a=this.currentStep)?a.cancel():void 0},a.prototype.hide=function(){var a;return null!=(a=this.currentStep)?a.hide():void 0},a.prototype.show=function(a){var b;return null==a&&(a=0),this.currentStep&&this.currentStep.hide(),b="string"==typeof a?this.getById(a):this.steps[a],b?(this.currentStep=b,b.show()):void 0},a.prototype.start=function(){return this.currentStep=null,this.next()},a}(),window.Tour=e}).call(this);